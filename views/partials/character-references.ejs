<%
// Character references partial
// This partial provides helper functions for character links in templates
%>

<%
// Helper function to generate character link
function characterLink(characterId, customText = null) {
  const characters = {
    'andrew': { name: 'Prince Andrew', url: '/character/andrew' },
    'jewel': { name: 'Jewel', url: '/character/jewel' },
    'alex': { name: 'Alexandria', url: '/character/alex' },
    'eloquence': { name: 'Eloquence', url: '/character/eloquence' },
    'daphne': { name: 'Daphne', url: '/character/daphne' },
    'lucky': { name: 'Lucky', url: '/character/lucky' },
    'yeti': { name: 'Yeti', url: '/character/yeti' },
    'maurice': { name: 'Maurice', url: '/character/maurice' }
  };
  
  const character = characters[characterId];
  if (!character) {
    return customText || characterId;
  }
  
  const linkText = customText || character.name;
  return `<a href="${character.url}" class="character-link" title="View ${character.name}'s character page">${linkText}</a>`;
}

// Helper function to process text and auto-link character names
function linkifyCharacters(text) {
  const characters = [
    { name: 'Prince Andrew', id: 'andrew' },
    { name: 'Jewel', id: 'jewel' },
    { name: 'Alexandria', id: 'alex' },
    { name: 'Eloquence', id: 'eloquence' },
    { name: 'Daphne', id: 'daphne' },
    { name: 'Lucky', id: 'lucky' },
    { name: 'Yeti', id: 'yeti' },
    { name: 'Maurice', id: 'maurice' }
  ];
  
  let processedText = text;
  
  characters.forEach(character => {
    const regex = new RegExp(`\\b${character.name}\\b`, 'gi');
    processedText = processedText.replace(regex, (match) => {
      return characterLink(character.id, match);
    });
  });
  
  return processedText;
}
%>

<!-- Character list for reference -->
<div class="character-references" style="display: none;">
  <!-- This section provides character data for JavaScript if needed -->
  <script>
    window.characterData = {
      'andrew': { name: 'Prince Andrew', url: '/character/andrew' },
      'jewel': { name: 'Jewel', url: '/character/jewel' },
      'alex': { name: 'Alexandria', url: '/character/alex' },
      'eloquence': { name: 'Eloquence', url: '/character/eloquence' },
      'daphne': { name: 'Daphne', url: '/character/daphne' },
      'lucky': { name: 'Lucky', url: '/character/lucky' },
      'yeti': { name: 'Yeti', url: '/character/yeti' },
      'maurice': { name: 'Maurice', url: '/character/maurice' }
    };
  </script>
</div>